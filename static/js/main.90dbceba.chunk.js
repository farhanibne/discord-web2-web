(this["webpackJsonpdiscord-clone"]=this["webpackJsonpdiscord-clone"]||[]).push([[0],{50:function(e,n,c){},66:function(e,n,c){},70:function(e,n,c){},71:function(e,n,c){},77:function(e,n,c){},78:function(e,n,c){},79:function(e,n,c){},81:function(e,n,c){},82:function(e,n,c){"use strict";c.r(n);var a=c(2),s=c.n(a),t=c(21),i=c.n(t),r=(c(66),c(20)),l=c(98),o=c(12),d=(c(70),c(71),c(4));var j=function(e){var n=e.channelName;return Object(d.jsxs)("div",{className:"chatHeader",children:[Object(d.jsx)("div",{className:"chatHeader__left",children:Object(d.jsxs)("h3",{children:[Object(d.jsx)("span",{className:"chatHeader__hash",children:"#"}),n]})}),Object(d.jsx)("div",{className:"chatHeader__right"})]})},u=c(25),h=Object(u.b)({name:"app",initialState:{channelId:null,channelName:null},reducers:{setChannelInfo:function(e,n){e.channelId=n.payload.channelId,e.channelName=n.payload.channelName}}}),b=h.actions.setChannelInfo,m=function(e){return e.app.channelId},O=function(e){return e.app.channelName},p=h.reducer,f=Object(u.b)({name:"user",initialState:{user:null},reducers:{login:function(e,n){e.user=n.payload},logout:function(e){e.user=null}}}),x=f.actions,v=x.login,N=x.logout,_=function(e){return e.user.user},g=f.reducer,y=c(27),I=y.a.initializeApp({apiKey:"AIzaSyDp5e8AGaVOhLJQysYBduDdndWa2ekrquM",authDomain:"discord-dz.firebaseapp.com",projectId:"discord-dz",storageBucket:"discord-dz.appspot.com",messagingSenderId:"665215399873",appId:"1:665215399873:web:a053d38cb1f625b3a9e140",measurementId:"G-V1CTD61PTD"}).firestore(),S=y.a.auth(),C=new y.a.auth.GoogleAuthProvider,k=I,w=c(100);c(77);var D=function(e){var n=e.timestamp,c=e.message,a=e.user;return Object(d.jsxs)("div",{className:"message",children:[Object(d.jsx)(w.a,{src:a.photo}),Object(d.jsxs)("div",{className:"message__info",children:[Object(d.jsxs)("h4",{children:[a.displayName,Object(d.jsx)("span",{className:"message__timestamp",children:new Date(null===n||void 0===n?void 0:n.toDate()).toLocaleString()})]}),Object(d.jsx)("p",{children:c})]})]})};var A=function(){var e=Object(o.c)(_),n=Object(o.c)(m),c=Object(o.c)(O),s=Object(a.useState)([]),t=Object(r.a)(s,2),i=t[0],u=t[1],h=Object(a.useState)(""),b=Object(r.a)(h,2),p=b[0],f=b[1];return Object(a.useEffect)((function(){n&&k.collection("channels").doc(n).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return u(e.docs.map((function(e){return e.data()})))}))}),[n]),Object(d.jsxs)("div",{className:"chat",children:[Object(d.jsx)(j,{channelName:c}),Object(d.jsx)("div",{className:"chat__messages",children:i.map((function(e){return Object(d.jsx)(D,{timestamp:e.timestamp,message:e.messsage,user:e.user})}))}),Object(d.jsxs)("div",{className:"chat__input",children:[Object(d.jsx)(l.a,{}),Object(d.jsxs)("form",{children:[Object(d.jsx)("input",{value:p,onChange:function(e){return f(e.target.value)},placeholder:"message #".concat(c)}),Object(d.jsx)("button",{onClick:function(c){c.preventDefault(),k.collection("channels").doc(n).collection("messages").add({user:e,messsage:p,timestamp:y.a.firestore.FieldValue.serverTimestamp()}),f("")},disabled:!n,className:"chat__inputButton",type:"submit",children:"send"})]})]})]})},B=(c(78),c(50),c(44)),E=c.n(B),z=c(45),H=c.n(z),L=(c(79),function(e){var n=e.id,c=e.channelName,a=Object(o.b)();return Object(d.jsx)("div",{className:"sidebarChannel",onClick:function(){return a(b({channelId:n,channelName:c}))},children:Object(d.jsxs)("h4",{children:[Object(d.jsx)("span",{className:"sidebarChannel__hash",children:"#"}),c]})})});var T=function(){var e=Object(o.c)(_),n=Object(a.useState)([]),c=Object(r.a)(n,2),s=c[0],t=c[1];return Object(a.useEffect)((function(){k.collection("channels").onSnapshot((function(e){return t(e.docs.map((function(e){return{id:e.id,channel:e.data()}})))}))}),[]),Object(d.jsxs)("div",{className:"sidebar",children:[Object(d.jsxs)("div",{className:"sidebar__top",children:[Object(d.jsx)("h3",{children:e.displayName}),Object(d.jsx)(E.a,{})]}),Object(d.jsxs)("div",{className:"sidebar__channels",children:[Object(d.jsxs)("div",{className:"sidebar__channelsHeader",children:[Object(d.jsx)("div",{className:"sidebar__header",children:Object(d.jsx)("h4",{children:"Text Channels"})}),Object(d.jsx)(H.a,{onClick:function(){var e=prompt("Enter a channel name");e&&k.collection("channels").add({channelName:e})},className:"sidebar__addChannel"})]}),Object(d.jsx)("div",{className:"sidebar__channelsList",children:s.map((function(e){var n=e.id,c=e.channel;return Object(d.jsx)(L,{id:n,channelName:c.channelName},n)}))})]})]})},W=c(99);c(81);var G=function(){return Object(d.jsxs)("div",{className:"login",children:[Object(d.jsx)("div",{className:"login__logo",children:Object(d.jsx)("h1",{children:"DZ discord"})}),Object(d.jsx)(W.a,{onClick:function(e){S.signInWithPopup(C),console.log("Login")},className:"login__button",children:"Sign In"})]})},J=c(47),P=c.n(J),V=c(46),F=c.n(V),M=c(48),q=c.n(M);var K=function(){var e=Object(o.c)(_),n=Object(a.useState)([]),c=Object(r.a)(n,2),s=(c[0],c[1]);return Object(a.useEffect)((function(){k.collection("channels").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,channel:e.data()}})))}))}),[]),Object(d.jsxs)("div",{className:"sidebar__profile",children:[Object(d.jsx)(w.a,{className:"sidebar__profileAvatar",onClick:function(){return S.signOut()},src:e.photo}),Object(d.jsxs)("div",{className:"sidebar__profileInfo",children:[Object(d.jsx)("h3",{children:e.displayName}),Object(d.jsxs)("p",{children:["#",e.uid.substring(0,5)]})]}),Object(d.jsxs)("div",{className:"sidebar__profileIcons",children:[Object(d.jsx)(F.a,{}),Object(d.jsx)(P.a,{}),Object(d.jsx)(q.a,{})]})]})};var Q=function(){var e=Object(o.b)(),n=Object(o.c)(_);return Object(a.useEffect)((function(){S.onAuthStateChanged((function(n){console.log("user is",n),e(n?v({uid:n.uid,photo:n.photoURL,email:n.email,displayName:n.displayName}):N())}))}),[e]),Object(d.jsx)("div",{className:"app",children:n?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{style:{display:"flex"},children:[Object(d.jsx)(T,{}),Object(d.jsx)(A,{})]}),Object(d.jsx)(K,{})]}):Object(d.jsx)(G,{})})},R=Object(u.a)({reducer:{user:g,app:p}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(o.a,{store:R,children:Object(d.jsx)(Q,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[82,1,2]]]);
//# sourceMappingURL=main.90dbceba.chunk.js.map